# Application Settings
APP_VERSION=1.0.0
APP_NAME=sebastian
APP_HOST=0.0.0.0
APP_PORT=3000
APP_EDITION=community  # Options: community, enterprise
APP_VERIFY_EMAIL=false
APP_ENV=production
NODE_ENV=production

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
# REDIS_PASSWORD is managed via Docker secrets

# Database Configuration
DB_TYPE=postgres  # Required: Must be "postgres"
DB_HOST=postgres
DB_PORT=5432
DB_NAME=server
DB_NAME_SERVER=server

# Database Users:
# 1. Admin User (postgres):
#    - Username: postgres (fixed)
#    - Used for: Database administration, setup, migrations
#    - Password: Managed via postgres_password secret
#    - Has full database access
POSTGRES_USER=postgres
DB_USER_ADMIN=postgres  # Required: Admin user for database operations
DB_PASSWORD_ADMIN=/run/secrets/postgres_password  # Required: Path to admin password secret
DB_PASSWORD_SUPERUSER=/run/secrets/postgres_password  # Required: Path to superuser password secret
DB_PASSWORD_SERVER=/run/secrets/db_password_server  # Required: Path to server password secret

# 2. Application User (app_user):
#    - Username: app_user (fixed)
#    - Used for: Application database access
#    - Password: Managed via db_password_server secret
#    - Access controlled by Row Level Security (RLS)
DB_USER_SERVER=app_user

# 3. Hocuspocus User:
#    - Username: app_user (fixed)
#    - Used for: Hocuspocus service database access
#    - Password: Managed via db_password_hocuspocus secret
#    - Access controlled by Row Level Security (RLS)
DB_USER_HOCUSPOCUS=app_user

# Logging Configuration
LOG_LEVEL=INFO  # Required: One of 'SYSTEM' | 'TRACE' | 'DEBUG' | 'INFO' | 'WARNING' | 'ERROR' | 'CRITICAL'
LOG_IS_FORMAT_JSON=false  # Required: Boolean
LOG_IS_FULL_DETAILS=false  # Required: Boolean
LOG_ENABLED_FILE_LOGGING=false
LOG_DIR_PATH=/path/to/logs
LOG_ENABLED_EXTERNAL_LOGGING=false
LOG_EXTERNAL_HTTP_HOST=
LOG_EXTERNAL_HTTP_PORT=
LOG_EXTERNAL_HTTP_PATH=
LOG_EXTERNAL_HTTP_LEVEL=
LOG_EXTERNAL_HTTP_TOKEN=

# Hocuspocus Configuration
HOCUSPOCUS_PORT=1234
HOCUSPOCUS_URL=ws://localhost:1234
REQUIRE_HOCUSPOCUS=false  # Optional: Set to "true" to require hocuspocus

# Email Configuration
EMAIL_ENABLE=false  # Required: Boolean
EMAIL_FROM=noreply@example.com  # Required: Valid email address
EMAIL_HOST=smtp.example.com
EMAIL_PORT=587  # Required: Number greater than 0
EMAIL_USERNAME=noreply@example.com  # Required: Valid email address
# EMAIL_PASSWORD is managed via Docker secrets

# Cryptographic Settings
# CRYPTO_KEY is managed via Docker secrets
CRYPTO_SALT_BYTES=16
CRYPTO_ITERATION=100000
CRYPTO_KEY_LENGTH=64
CRYPTO_ALGORITHM=aes-256-gcm

# Authentication Settings
NEXTAUTH_URL=http://localhost:3000  # Required: Valid URL
NEXTAUTH_SESSION_EXPIRES=86400  # Required: Number greater than 0

# Workflow Configuration
WORKFLOW_DISTRIBUTED_MODE=true  # Enable distributed mode with Redis Streams
WORKFLOW_REDIS_STREAM_PREFIX=workflow:events:  # Redis stream prefix
WORKFLOW_REDIS_CONSUMER_GROUP=workflow-workers  # Consumer group name
WORKFLOW_REDIS_BATCH_SIZE=10  # Number of events to process in a batch
WORKFLOW_REDIS_IDLE_TIMEOUT_MS=60000  # Idle timeout in milliseconds
WORKFLOW_WORKER_REPLICAS=2  # Number of worker containers to run

# Deployment Settings
PROJECT_NAME=sebastian
EXPOSE_DB_PORT=5432
EXPOSE_HOCUSPOCUS_PORT=1234
EXPOSE_REDIS_PORT=6379
EXPOSE_SERVER_PORT=3000

# Docker Secrets:
# The following sensitive values are managed via Docker secrets:
# 1. Database Passwords:
#    - postgres_password: Admin user password
#    - db_password_server: Application user password
#    - db_password_hocuspocus: Hocuspocus service password
# 2. Redis Password:
#    - redis_password
# 3. Email Password:
#    - email_password
# 4. Security Keys:
#    - crypto_key
#    - token_secret_key
#    - nextauth_secret
#    - alga_auth_key
#    - secret_key
# 5. OAuth Credentials:
#    - google_oauth_client_id
#    - google_oauth_client_secret
